"use strict";function getParams(){var e="",a=$("#input-title").val();switch(a&&(e+="s="+a+"&"),$("#input-type").val()){case"1":e+="type=movie&";break;case"2":e+="type=series&"}var t=$("#input-year").val();return t&&(e+="y="+t+"&"),e}function appendMovie(e){"N/A"==e.Poster&&(e.Poster="images/poster.png"),$("#search-container").append($("<div>").addClass("poster item-image").attr("id",e.imdbID).append($("<img>").addClass("poster-img img-responsive").attr("src",e.Poster)).append($("<div>").addClass("poster-desc").append($("<h2>").text(e.Title)).append($("<p>").text(e.Year))))}function reloadEvents(){$(".poster").on({mouseenter:function(){$(this).find(".poster-desc").stop().animate({height:"100%"},200)},mouseleave:function(){$(this).find(".poster-desc").stop().animate({height:0},200)}})}var page=0,pageTotal=0,scrollable=!1,URL="https://www.omdbapi.com/?",params="";$(document).ajaxStart(function(){return $(".spinner").show()}),$(document).ajaxStop(function(){return $(".spinner").hide()}),reloadEvents(),$("#search-btn, #adv-search-btn").click(function(e){e.preventDefault(),$("#search-container").empty(),page=1,params=getParams(),$.getJSON(URL+params,function(e){pageTotal=Math.ceil(e.totalResults/10),$.each(e.Search,function(e,a){appendMovie(a)}),reloadEvents(),page<pageTotal&&(scrollable=!0)})}),$(window).scroll(function(){var e=$(document).height()-$(window).height();scrollable&&$(window).scrollTop()>e-50&&(scrollable=!1,params=getParams()+"page="+ ++page,$.getJSON(URL+params,function(e){$.each(e.Search,function(e,a){appendMovie(a)}),reloadEvents(),page<pageTotal&&(scrollable=!0)}))});