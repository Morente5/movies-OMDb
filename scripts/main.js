"use strict";function getParams(){var t="",e=$("#input-title").val();switch(e&&(t+="s="+e+"&"),$("#input-type").val()){case"1":t+="type=movie&";break;case"2":t+="type=series&"}var a=$("#input-year").val();return a&&(t+="y="+a+"&"),t}function appendMovie(t){"N/A"==t.Poster&&(t.Poster="images/poster.png"),$("#search-container").append($("<div>").addClass("poster item-image").attr("id",t.imdbID).append($("<img>").addClass("poster-img img-responsive").attr("src",t.Poster)).append($("<div>").addClass("poster-desc").append($("<h2>").text(t.Title)).append($("<p>").text(t.Year))))}function reloadEvents(){$(".poster").on({mouseenter:function(){$(this).find(".poster-desc").stop().animate({height:"100%"},200)},mouseleave:function(){$(this).find(".poster-desc").stop().animate({height:0},200)},click:function(){var t=$(this).attr("id");$.getJSON("https://www.omdbapi.com/?i="+t,function(e){$("#modal-title, #modal-type, #modal-year, #modal-country, #modal-genre, #modal-director, #modal-writer, #modal-cast, #modal-plot").empty(),$("#modal-title").text(e.Title),$("#modal-type").text(e.Type),$("#modal-year").text(e.Year),$("#modal-country").text(e.Country),$("#modal-genre").text(e.Genre),$("#modal-director").text(e.Director),$("#modal-writer").text(e.Writer),$("#modal-cast").text(e.Cast),$("#modal-plot").text(e.Plot),$("#modal-link").attr("href","https://www.imdb.com/title/"+t).attr("target","_blank")}).then(function(){return $("#myModal").modal()})}})}var page=0,pageTotal=0,scrollable=!1,URL="https://www.omdbapi.com/?",params="";$(document).ajaxStart(function(){return $(".spinner").show()}),$(document).ajaxStop(function(){return $(".spinner").hide()}),reloadEvents(),$("#input-title").bind("keypress",function(t){13==t.keyCode&&$("#search-btn").click()}),$("#search-btn, #adv-search-btn").click(function(t){t.preventDefault(),$("#search-container").empty(),page=1,params=getParams(),$.getJSON(URL+params,function(t){pageTotal=Math.ceil(t.totalResults/10),$.each(t.Search,function(t,e){appendMovie(e)}),reloadEvents(),page<pageTotal&&(scrollable=!0)})}),$(window).scroll(function(){var t=$(document).height()-$(window).height();scrollable&&$(window).scrollTop()>t-50&&(scrollable=!1,params=getParams()+"page="+ ++page,$.getJSON(URL+params,function(t){$.each(t.Search,function(t,e){appendMovie(e)}),reloadEvents(),page<pageTotal&&(scrollable=!0)}))});